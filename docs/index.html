<!DOCTYPE html>
<html lang="en"> 
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deck Builder</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="icon" type="image/png" href="https://picsum.photos/16/16" />
  </head>
  <body>
    <header>
      <nav id="main-nav">
        <a id="home-button" href="http://localhost:8080/" class="button">
          <span>Home</span>
          <img src="images/logo.svg" alt>
        </a>
      </nav>
      <div class="main-nav__group">
        <button id="login-modal-open-button">Sign In</button>
        <a id="profile-link" href="my-profile.html" class="button">My Profile</a>
        <button id="new-deck-button">New Deck&#43;</button>
      </div>
      <button id="settings-button"> 
        <span>Settings</span>
        <img src="images/icon_settings.svg" alt>
      </button>
    </header>
    <!--<button id="logout-button" style="display:none;">Logout</button>-->

    <main>
      <aside id="deck-section">
        <!-- JS will append new <details> here -->
      </aside>
      <div class="wrapper">
        <h1>Deck Builder</h1>
        <form id="search-form">
          <!-- Search bar -->
          <fieldset>
            <legend class="visually-hidden">Search</legend>
            <div class="form__row">
              <input type="text" id="search-input" placeholder="Search cards by name or keyword..." />
              <button id="search-button" type="submit">Search</button>
              <button id="clear-search-button">Clear Search</button>
            </div>
          </fieldset>
          <!-- Filters -->
          <details id="filters">
            <summary>Filters</summary>
            <fieldset>
              <legend class="visually-hidden">Filters</legend>
              <!-- Mana color checkboxes -->
              <fieldset id="mana-colors-filter">
                <legend class="legend--small">Mana colors:</legend>
                <div class="form__row">
                  <div id="color-filter">
                    <!-- checkboxes will be injected by JS here -->
                  </div>
                </div>
              </fieldset>
              <!-- Card type selection -->
              <div class="form__row">
                <label>
                  Card type
                  <select id="type-filter">
                    <option value="">Any Card Type</option>
                    <option value="creature">Creature</option>
                    <option value="instant">Instant</option>
                    <option value="sorcery">Sorcery</option>
                    <option value="land">Land</option>
                    <option value="artifact">Artifact</option>
                    <option value="enchantment">Enchantment</option>
                    <option value="planeswalker">Planeswalker</option>
                  </select>
                </label>
              </div>
              <!-- Reset button -->
              <div class="form__row">
                <button id="reset-filters-button">Clear All Filters</button>
              </div>
            </fieldset>
          </details>
        </form>
        <!-- Search card results -->
        <div id="search-results"></div> 
        <!-- Pagination container -->
        <div id="pagination-container"></div>
      </div>
      <!-- Login modal -->
      <div id="login-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="login-modal-title" aria-hidden="true">
        <div class="modal__scroll-container" role="region" tabindex="0">
          <div class="modal__content">
            <!-- Login -->
            <div id="login-section" class="active">
              <h2 id="login-modal-title">Sign In</h2>
              <form id="login-form">
                <label for="username">
                  Username
                  <input id="username" name="username" type="text" required />
                </label>
                <label for="password">
                  Password
                  <input id="password" name="password" type="password" required />
                </label>
                <button id="login-modal-sign-in-button" type="submit">Sign In</button>
                <button id="login-modal-close-button" class="button--x-close" type="button"><span class="visually-hidden">Close</span></button>
              </form> 
              <button id="create-account-button" class="switch-to-signup">Create an Account</button>
            </div>
            <!-- Sign up -->
            <div id="signup-section" class="hidden">
              <button class="switch-to-login">&larr; Back to Sign In</button>
              <h2 id="signup-form-title">Create an Account</h2>
              <form id="signup-form">
                <label for="email">
                  Email
                  <input id="signup-email" name="signup-email" type="email" required />
                </label>
                <label for="username">
                  Username
                  <input id="signup-username" name="signup-username" type="text" required />
                </label>
                <label for="password">
                  Password 
                  <input id="signup-password" name="signup-password" type="password" required />
                </label>
                <button id="signup-submit-button" class="switch-to-login" type="submit">Sign Up</button>
              </form>
              <p id="signup-message"></p>
            </div>
          </div>
        </div>
      </div>
      <!-- Card detail modal -->
      <div id="card-details-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="card-details-title" aria-hidden="true">
        <div class="modal__scroll-container" role="region" tabindex="0">
          <h2 id="card-details-title" class="visually-hidden">Card Details</h2>
          <button id="card-details-close-button" class="button--x-close"><span class="visually-hidden">Close</span></button>
          <div id="card-details-body" class="modal__content" role="region" tabindex="0">
            <!-- Card details will be injected by JS here -->
          </div>
        </div>
      </div>
      <!-- New Deck Modal -->
      <div id="new-deck-modal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="new-deck-modal-title">
        <div class="modal__scroll-container" role="region" tabindex="0">
          <div class="modal__content">
            <h2>Name your new deck</h2>
            <button id="new-deck-modal-close-button" class="button--x-close"><span class="visually-hidden">Close</span></button>
            <form id="new-deck-form" novalidate>
              <label>
                Deck Name
                <input
                  id="deck-name-input"
                  name="deck-name"
                  type="text"
                  maxlength="80"
                  placeholder="Enter deck name"
                  required
                />
              </label>
              <p id="deck-name-error" aria-live="polite" style="display: none"></p>
              <button type="submit" id="save-new-deck-button">Create New Deck</button>
            </form>
          </div>
        </div>
      </div>
      <!-- Add to Deck Modal -->
      <div id="add-to-deck-modal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="add-to-deck-modal-title">
        <div class="modal__scroll-container" role="region" tabindex="0">
          <div class="modal__content">
            <h2 id="add-to-deck-modal-title" class="visually-hidden">Add Card</h2>
            <button id="add-to-deck-modal-close-button" class="button--x-close"><span class="visually-hidden">Close</span></button>
            
            <!-- Existing decks list -->
            <div id="existing-decks-container">
              <h3>Add to an existing deck:</h3>
              <ul id="existing-decks-list">
                <!-- Decks will be rendered here -->
              </ul>
              <p id="add-to-deck_existing-deck-success-message" class="success" style="display:none;"></p>
            </div>

            <!-- New deck form -->
            <h3>Add to a new deck:</h3>
            <form id="add-to-deck_new-deck-form" novalidate>
              <label>
                Deck Name
                <input
                  id="add-to-deck_deck-name-input"
                  name="deck-name"
                  type="text"
                  maxlength="80"
                  placeholder="Enter deck name"
                  required
                />
              </label>
              <p id="add-to-deck_deck-name-error" aria-live="polite" style="display: none"></p>
              <button type="submit" id="add-to-deck_save-new-deck-button">Add to New Deck</button>
            </form>
            <p id="add-to-deck_new-deck-success-message" class="success" style="display:none;"></p>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 Deck Builder. All rights reserved.</p>
    </footer>
    
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/features/auth/login.js"></script>
  </body>
</html>

